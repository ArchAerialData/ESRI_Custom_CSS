/* ======================================================================
ArcGIS Instant Apps — Portfolio (Tabbed)  |  Modular CSS Template
Author: Clean, labeled selectors with guidance for new devs

Notes & constraints:
- Built for copy/paste into the single Custom CSS field in Portfolio (Tabbed).
- Targets the Portfolio shell only. You cannot style inside embedded apps
  (e.g., Scene Viewer, Map Viewer) due to iframe isolation — use URL params
  like ui=min on those embeds instead.
- Instant Apps supports custom CSS but warns that updates can affect selectors.
  Re-test after each ArcGIS Online release and keep client overrides at bottom.

Tip: Keep rules narrowly scoped (prefix with #tabbedLayout for tabs) and use
Calcite variables at component boundaries to influence internal colors.
====================================================================== */

/* ============================ 1) BRAND TOKENS ============================
Purpose: per-client colors, motion preferences, and optional overlay logo.
How to use: edit these values only; try not to hard-code colors elsewhere.
*/
:root{
  /* Colors */
  --brand-red:   #cf1a21;
  --brand-red-2: #8f0f14;
  --brand-gray-1:#181b1f;   /* darkest */
  --brand-gray-2:#2a3036;   /* mid-dark */
  --brand-gray-3:#565d66;   /* mid */

  --text-on-dark:#ffffff;
  --text-on-light:#0b0f0e;

  /* Motion */
  --app-header-gradient-speed: 14s;
  --tab-gradient-speed: 22s;

  /* Optional centered overlay logo (set to 'none' to disable).
     Host the image externally (no uploads in Instant Apps). */
  --overlay-logo-url: none; /* e.g., url("https://.../ClientLogo.png") */
  --overlay-logo-width: clamp(260px, 36vw, 560px);
  --overlay-logo-height: min(64px, calc(var(--instant-apps-header-height, 56px) - 6px));
}

/* ============================ 2) HEADER MODULE ===========================
Selector map (Portfolio header):
- instant-apps-header                     : whole header web component
- instant-apps-header::part(container)    : internal flex container
- instant-apps-header::part(wrapper)      : internal wrapper (padding, bg)
- instant-apps-header::part(title)        : app title text (when exposed)
- instant-apps-header::part(logo)         : native logo (leave alone if used)
- instant-apps-header::after              : OPTIONAL centered overlay logo (ours)

What to know:
- Use Calcite variables here to affect internal text/brand colors.
- Keep wrappers transparent and pad via ::part to avoid covering content.
*/
instant-apps-header{
  background:
    /* Red -> Gray; compressed red band */
    linear-gradient(110deg,
      var(--brand-red-2) 0%,
      var(--brand-red)   18%,
      var(--brand-gray-2) 36%,
      var(--brand-gray-1) 100%),
    /* Contrast veil for readability */
    linear-gradient(180deg, rgba(0,0,0,.45) 0%, rgba(0,0,0,.20) 40%, rgba(0,0,0,.50) 100%);
  background-size: 400% 400%, 100% 100%;
  animation: appHeaderShift var(--app-header-gradient-speed) ease-in-out infinite;

  --calcite-color-text-1: var(--text-on-dark);
  --calcite-color-text-2: #e9ecef;
  --calcite-color-brand: var(--brand-red);
  --calcite-color-brand-hover: #b3151b;

  position: relative; z-index: 0;
  box-shadow: inset 0 -1px 0 rgba(255,255,255,.10);
}
instant-apps-header::part(container),
instant-apps-header::part(wrapper){
  background: transparent !important;
  padding-inline: 16px !important;
}

/* OPTIONAL centered overlay logo. Disable by setting --overlay-logo-url: none. */
instant-apps-header::after{
  content: "";
  position: absolute;
  inset: 50% auto auto 50%;
  width: var(--overlay-logo-width);
  height: var(--overlay-logo-height);
  transform: translate(-50%, -50%);
  background: var(--overlay-logo-url) no-repeat center center / contain;
  pointer-events: none; /* keep header UI clickable */
  z-index: 2;
  filter: drop-shadow(0 1px 0 rgba(0,0,0,.25));
}
@media (prefers-reduced-motion: reduce){
  instant-apps-header{ animation: none; }
}
@keyframes appHeaderShift{
  0%{background-position:0% 50%, 0 0}
  50%{background-position:100% 50%, 0 0}
  100%{background-position:0% 50%, 0 0}
}

/* ============================ 3) TABS MODULE =============================
Selector map (Tabbed layout):
- #tabbedLayout .esri-portfolio-tabbed__tab-list           : tab strip container (background/spacing)
- .esri-portfolio-tabbed-item                               : a tab (base/inactive)
- .esri-portfolio-tabbed-item:hover                         : hover state
- .esri-portfolio-tabbed-item--selected                     : active tab
- .esri-portfolio-tabbed-item:focus-visible                 : keyboard focus

Scoping tip: keep the #tabbedLayout prefix to avoid collisions elsewhere.

A) Tab strip container ("blank space" behind tabs) */
#tabbedLayout .esri-portfolio-tabbed__tab-list{
  background: #3a3f45;                 /* strip background */
  box-shadow: inset 0 -1px 0 rgba(0,0,0,.35);
  gap: 6px;                             /* space between tabs */
  padding: 8px 12px;
}

/* B) Inactive tab (NOT hovered, NOT selected) */
#tabbedLayout .esri-portfolio-tabbed__tab-list .esri-portfolio-tabbed-item{
  background: rgba(255,255,255,.06);
  color: var(--text-on-dark);
  border-radius: 6px;
  transition: background .2s ease, color .2s ease, box-shadow .2s ease;
}

/* C) Hover state */
#tabbedLayout .esri-portfolio-tabbed__tab-list .esri-portfolio-tabbed-item:hover{
  background: rgba(255,255,255,.12);
  box-shadow: 0 1px 6px rgba(0,0,0,.25);
}

/* D) Active tab (selected) */
#tabbedLayout .esri-portfolio-tabbed__tab-list .esri-portfolio-tabbed-item--selected,
#tabbedLayout .esri-portfolio-tabbed__tab-list .esri-portfolio-tabbed-item--selected:hover{
  background:
    linear-gradient(135deg,
      var(--brand-red-2) 0%,
      var(--brand-red)   42%,
      var(--brand-gray-3) 70%,
      var(--brand-gray-2) 100%),
    linear-gradient(180deg, rgba(255,255,255,.05) 0%, rgba(0,0,0,.14) 100%) !important;
  background-size: 220% 220%, 100% 100%;
  animation: tabRedShift var(--tab-gradient-speed) ease-in-out infinite;
  color: #ffffff !important;
  text-shadow: 0 1px 0 rgba(0,0,0,.4);
  box-shadow: 0 0 0 1px rgba(0,0,0,.25) inset, 0 2px 10px rgba(227,28,36,.22);
}

/* E) Focus ring (keyboard navigation) */
#tabbedLayout .esri-portfolio-tabbed__tab-list .esri-portfolio-tabbed-item:focus-visible{
  outline: 2px solid var(--brand-red); outline-offset: 2px;
}

/* Optional: Strictly idle (not selected and not hovered)
#tabbedLayout .esri-portfolio-tabbed__tab-list
  .esri-portfolio-tabbed-item:not(.esri-portfolio-tabbed-item--selected):not(:hover){
  // add strictly idle styles if needed
}
*/

@keyframes tabRedShift{
  0%{background-position:0% 50%, 0 0}
  50%{background-position:100% 50%, 0 0}
  100%{background-position:0% 50%, 0 0}
}
@media (prefers-reduced-motion: reduce){
  #tabbedLayout .esri-portfolio-tabbed__tab-list .esri-portfolio-tabbed-item--selected,
  #tabbedLayout .esri-portfolio-tabbed__tab-list .esri-portfolio-tabbed-item--selected:hover{
    animation: none;
  }
}

/* ====================== 4) COVER PAGE (OPTIONAL / ON DEMAND) =============
Instant Apps "Cover page" is the landing overlay: instant-apps-landing-page
What to know:
- Set text and a SAFE fallback button color via CSS variables (works widely).
- For richer button looks, apply gradient to the HOST calcite-button and make
  the internal ::part(button) transparent. This avoids shadow DOM limitations.
*/

/* A) Safe text and fallback button token */
instant-apps-landing-page{
  --instant-apps-landing-page-text-color: #ffffff !important;
  --instant-apps-landing-page-entry-button-color: #cf1a21 !important; /* fallback */
}
/* Optional: subtle contrast lift for photo overlays */
instant-apps-landing-page::part(container){ backdrop-filter: saturate(1.05) contrast(1.05); }

/* B) Host gradient pattern for the Enter button */
instant-apps-landing-page calcite-button{
  background:
    linear-gradient(135deg, var(--brand-red) 0%, #b3151b 50%, var(--brand-red-2) 100%) !important;
  background-size: 220% 220% !important;
  animation: enterShift 10s ease-in-out infinite;
  border: 1px solid rgba(11,15,14,.65) !important;
  box-shadow: 0 0 0 1px rgba(0,0,0,.25) inset,
              0 6px 18px rgba(227,28,36,.25),
              0 1px 0 rgba(255,255,255,.35) inset !important;
  color: #0b0f0e !important;
  border-radius: 8px !important;
  overflow: hidden; /* clip gradient inside rounded corners */
}
/* Make internal part transparent so host gradient shows */
instant-apps-landing-page calcite-button::part(button){
  background: transparent !important;
  color: #0b0f0e !important;
}
/* Hover / focus / reduced motion */
instant-apps-landing-page calcite-button:hover{ background-position: 100% 50% !important; }
instant-apps-landing-page calcite-button:focus-visible{ outline: 2px solid #3aa154; outline-offset: 2px; }
@media (prefers-reduced-motion: reduce){ instant-apps-landing-page calcite-button{ animation: none; } }
@keyframes enterShift{ 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

/* ============================ 5) UTILITIES =============================== */
/* Safe text helpers for quick overrides */
.text-on-dark{ color: var(--text-on-dark) !important; }
.text-on-light{ color: var(--text-on-light) !important; }

/* ============================ 6) CLIENT OVERRIDES ========================
Keep project-specific exceptions here so template updates are easier later.
*/
